{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { authService } from \"../../services/authService\";\nconst initialState = {\n  user: null,\n  token: localStorage.getItem(\"token\") || null,\n  isLoading: false,\n  error: null\n};\nexport const login = createAsyncThunk(\"auth/login\", async (data, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await authService.login(data);\n    return res;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message || \"Login failed\");\n  }\n});\nexport const register = createAsyncThunk(\"auth/register\", async (data, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await authService.register(data);\n    return res;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message || \"Registration failed\");\n  }\n});\nexport const getProfile = createAsyncThunk(\"auth/getProfile\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await authService.getProfile();\n    return res;\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || err.message || \"Failed to fetch profile\");\n  }\n});\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout: state => {\n      authService.logout();\n      state.user = null;\n      state.token = null;\n      state.error = null;\n    },\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n      state.token = action.payload.token;\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }).addCase(register.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(register.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n      state.token = action.payload.token;\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }).addCase(getProfile.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getProfile.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n    }).addCase(getProfile.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logout,\n  clearError\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","initialState","user","token","localStorage","getItem","isLoading","error","login","data","rejectWithValue","res","err","_err$response","_err$response$data","response","message","register","_err$response2","_err$response2$data","getProfile","_","_err$response3","_err$response3$data","authSlice","name","reducers","logout","state","clearError","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/hemch/Music/trainme/client/src/features/auth/authSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport {\r\n  authService,\r\n  LoginData,\r\n  RegisterData,\r\n  AuthResponse,\r\n} from \"../../services/authService\";\r\n\r\ninterface AuthState {\r\n  user: Partial<AuthResponse> | null;\r\n  token: string | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  token: localStorage.getItem(\"token\") || null,\r\n  isLoading: false,\r\n  error: null,\r\n};\r\n\r\nexport const login = createAsyncThunk(\r\n  \"auth/login\",\r\n  async (data: LoginData, { rejectWithValue }) => {\r\n    try {\r\n      const res = await authService.login(data);\r\n      return res;\r\n    } catch (err: any) {\r\n      return rejectWithValue(\r\n        err.response?.data?.message || err.message || \"Login failed\"\r\n      );\r\n    }\r\n  }\r\n);\r\n\r\nexport const register = createAsyncThunk(\r\n  \"auth/register\",\r\n  async (data: RegisterData, { rejectWithValue }) => {\r\n    try {\r\n      const res = await authService.register(data);\r\n      return res;\r\n    } catch (err: any) {\r\n      return rejectWithValue(\r\n        err.response?.data?.message || err.message || \"Registration failed\"\r\n      );\r\n    }\r\n  }\r\n);\r\n\r\nexport const getProfile = createAsyncThunk(\r\n  \"auth/getProfile\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const res = await authService.getProfile();\r\n      return res;\r\n    } catch (err: any) {\r\n      return rejectWithValue(\r\n        err.response?.data?.message || err.message || \"Failed to fetch profile\"\r\n      );\r\n    }\r\n  }\r\n);\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    logout: (state) => {\r\n      authService.logout();\r\n      state.user = null;\r\n      state.token = null;\r\n      state.error = null;\r\n    },\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(login.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(\r\n        login.fulfilled,\r\n        (state, action: PayloadAction<AuthResponse>) => {\r\n          state.isLoading = false;\r\n          state.user = action.payload;\r\n          state.token = action.payload.token;\r\n        }\r\n      )\r\n      .addCase(login.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      .addCase(register.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(\r\n        register.fulfilled,\r\n        (state, action: PayloadAction<AuthResponse>) => {\r\n          state.isLoading = false;\r\n          state.user = action.payload;\r\n          state.token = action.payload.token;\r\n        }\r\n      )\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      .addCase(getProfile.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getProfile.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n      })\r\n      .addCase(getProfile.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { logout, clearError } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}